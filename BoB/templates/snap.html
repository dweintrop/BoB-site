<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>Snap! Build Your Own Blocks. Beta</title>



		{% load staticfiles %}

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.0/jquery-ui.min.js"></script> 
		<script type="text/javascript" src="{% static "snapStudy.js"%}"></script>


		<script type="text/javascript" src="{% static "codeMirror/codemirror.js"%}"></script>
		<link rel="stylesheet" href="{% static "css/codemirror.css"%}" type="text/css">
		<script type="text/javascript" src="{% static "codeMirror/javascript.js"%}"></script>
		<script type="text/javascript" src="{% static "codeMirror/matchbrackets.js"%}"></script>
		<script type="text/javascript" src="{% static "codeMirror/show-hint.js"%}"></script>
		<script type="text/javascript" src="{% static "codeMirror/javascript-hint.js"%}"></script>

		<link rel="stylesheet" href="{% static "css/jquery-ui.css"%}" type="text/css">
		<link rel="stylesheet" href="{% static "css/jquery-ui.theme.css"%}" type="text/css">


    <link rel="shortcut icon" href="http://snap.berkeley.edu/fav3.gif" type="image/gif">
		<script type="text/javascript" src="{% static "morphic.js"%}"></script>
		<script type="text/javascript" src="{% static "widgets.js"%}"></script>
		<script type="text/javascript" src="{% static "blocks.js"%}"></script>
		<script type="text/javascript" src="{% static "threads.js"%}"></script>
		<script type="text/javascript" src="{% static "objects.js"%}"></script>
		<script type="text/javascript" src="{% static "gui.js"%}"></script>
		<script type="text/javascript" src="{% static "paint.js"%}"></script>
		<script type="text/javascript" src="{% static "lists.js"%}"></script>
		<script type="text/javascript" src="{% static "byob.js"%}"></script>
		<script type="text/javascript" src="{% static "xml.js"%}"></script>
		<script type="text/javascript" src="{% static "store.js"%}"></script>
		<script type="text/javascript" src="{% static "locale.js"%}"></script>
		<script type="text/javascript" src="{% static "cloud.js"%}"></script>
		<script type="text/javascript" src="{% static "sha512.js"%}"></script>
		<script type="text/javascript">

			var world;
			var myCodeMirror;

			window.onload = function () {
				world = new WorldMorph(document.getElementById('world'), true); // second arg sets fillPage
                world.worldCanvas.focus();
				new IDE_Morph().openIn(world);
				setInterval(loop, 1);

				// setup javascript editor
				var cmDiv = document.getElementById('cmDiv');
				myCodeMirror = CodeMirror(cmDiv, {
					mode: "javascript",
					matchBrackets: true,
					extraKeys: {"Ctrl-Space": "autocomplete"}
					// readOnly: true
				});

				// try and remove the code bubble from the code of block
				myCodeMirror.on('focus', hideCodeBubble);
				myCodeMirror.on('blur', hideCodeBubble);
			};

			function loop() {
				world.doOneCycle();				
			}

			function hideCodeBubble() {
				world.hand.destroyTemporaries();
			}
		</script>
	</head>
	<body style="margin: 0;">
		<div style="display:none;">
			{{form.student_id}}
			{{form.pair_id}}
			<input id="id_condition" value="{{form.class_period.value}}"/>
		</div>

    <div id="cmDiv" title="Javascript Editor" style="display:none;position:aboslute;z-index:-1;width:55%;height:44%;"></div>
		<canvas id="world" tabindex="1" style="position: absolute;z-index:0;" />
  </body>
</html>
